import base64
import requests
import csv
import json
import io
# OpenAI API Key
api_key = ""

# Function to encode the image
def encode_image(image_path):
  with open(image_path, "rb") as image_file:
    return base64.b64encode(image_file.read()).decode('utf-8')

# Path to your image
image_path = ['C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\00524b56-4fe9-4fa4-b154-23394b827c86.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\043613d8-5a4f-486d-b941-1b591622c2ed.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\09922092-d196-471f-86d4-38366beee9e8.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\0d3e37dd-23db-4d97-b3e4-50486901c527.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\10ed66fa-b113-4357-9b7c-22d084787ab8.jpeg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\131f7202-9aae-4a9d-a928-e5e57f62b0ea.jpeg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\22061e07-c158-4548-ae2d-f40e20dabb73.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\294f0d81-3979-4353-8711-aa24a7048917.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\2b1e5ff3-c949-4db7-ab5d-5033d5ad2a8f.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\2b8dde51-be3e-4e5e-8495-cd730a0089cc.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\2dd1937e-8552-4867-a70c-3db47d5246e6.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\2dd5fc7e-4406-476c-9a23-838346d07d4f.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\30af8cc0-fed1-4dd7-9a55-48ee452e3b98.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\319ae2a5-5ed5-482c-af1e-186351c11921.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\31cc94f4-be3c-439b-953b-3a795aebe98e.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\338c292c-be82-4f44-8b56-21014f4a0cd1.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\357764e5-bd08-4edd-bda8-94c8fd5adaec.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\42b3bb58-def3-4640-80e4-dd6d4741e459.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\457c3f7b-9c0b-41c1-b9d2-ece26cc55da7.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\4ea82b85-8047-4f49-a6a1-e6de8af5ce0d.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\52b93e4c-b546-4652-ab77-9327d0d5f0ed.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\56415ebf-98cc-4050-a4eb-58de6c5d22bf.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\5656d8ad-6ba4-4ea7-9a11-61af95ab15db.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\57bfc8b1-f737-48db-98e2-718ac74ac353.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\5bffb8e1-aef4-44b5-8ee5-a9be8089b79e.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\5f5f7af4-933d-47f6-9fe0-ab05eab6ef71.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\6ddc9b01-d77a-4b5a-aed2-5f4b7ad13149.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\7250fa3a-7d71-46de-847a-5355adf37f5c.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\7c8910ed-2baa-43f2-9ecc-dfdeb7ddf159.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\897aa322-67ca-4eb0-801c-6db864c6af49.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\8c2d634a-84a6-42a0-a4e5-397b07167c74.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\941652f2-4e5c-4225-9c3c-c2e71a8d41c2.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\94642ef3-5940-4a38-8666-5d77ec2f66c8.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\985b24bc-0fc6-4710-bdc6-cf3a24594a40.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\989e721d-8fca-49e2-b4b0-ffb2f79cd176.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\99ac9878-e112-4a90-aee5-f09b65d92c85.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\9c8af380-546d-46dd-b78e-af791f27ab2f.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\9cc280ea-5709-4677-bd3f-0e2981e0c7cc.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\a7ab822c-abae-4ce9-adf3-294f349952a7.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\a8c2e338-c998-40f1-97b0-e9571628931a.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\ab6dee1e-6199-4ee5-bb66-146608363207.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\b96ddbb9-1525-4c0b-bd5d-90d1f9e7ab2d.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\bbceab98-2049-487b-bc29-85dee1daad7f.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\c1c17002-1eb6-4bd7-b052-e69c0b36cf8c.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\c2206da4-2e43-43a7-89bd-0131da6c362e.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\c9fc0637-44d8-4159-96f8-750a0d03b440.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\cf93684c-32cc-4cf4-9065-116ec75cc7e2.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\d056cb61-069a-4d34-aeef-a9fd615ba6b6.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\d0de0f42-15fa-4d7a-b13c-3917d0b3a4ad.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\d63180b8-4981-4956-8e7a-79eefb74a26d.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\da9b2f5a-e31c-4b40-8246-49bfbc2d8042.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\de07dc70-921f-47e2-ab79-80a192eddec3.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\e2072ab9-5e82-4463-a68c-82c7854bb053.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\e49944b8-380e-4f5b-8919-efb255f34769.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\f0c1e56f-41e2-40a1-a6ac-8b29b59d82ee.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\f18c99c6-6fa5-42f4-92b5-e8fc4d39cf93.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\f1b24122-4e43-4540-b035-e245de3b6d68.jpg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\f248a9ed-e8e5-4af0-836f-4eb58886e894.jpeg', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\f5ef2aae-282b-498c-997f-0f605fd7539d.png', 'C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\train-20240120T143828Z-001\\train\\files\\fee4caf7-96ba-41db-ae55-90be82280b3a.jpg']
def base64_loop(image_path):

  base64_image = []
  count  =0
  # Getting the base64 string
  for path in image_path:

    base64_image.append(encode_image(image_path[count]))
    count+=1
  return base64_image
#print(type(base64_image))
print(base64_loop(image_path))



# Example API response string
api_response_string = "Name,Age,Location\nJohn,25,New York\nJane,30,San Francisco"
def addtotxt(api_response_string, imgname):
  # Convert the string to a CSV reader object
  # Specify the path for the CSV file
  txt_file_path = "C:\\Users\\bhand\\Desktop\\OpenCV\\dataverse\\Project\\"
  api_response_string = [imgname, api_response_string]
  # Write the CSV data to a file
  # Write the list to the text file without double quotes
  with open(txt_file_path, 'a') as txt_file:
    txt_file.write(json.dumps(api_response_string) + '\n')

  print(f"CSV file has been created at: {txt_file_path}")
